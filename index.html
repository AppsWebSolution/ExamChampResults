
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="logo/56691341_832994077036586_2888507274840506368_n.jpg"/>
  <title>EXAMCHAMP    :   WBBSE 2020 PPR/PPS Results | ExamChamp</title>
  <!--<link rel="stylesheet" type="text/css"
    href="https://cdn.abplive.com/exam-results/hindi/css/desktop/styles-election-2020.css?v=1.01" />
  <link rel="stylesheet" type="text/css" href="./css/register-board-results-form.css?v=0.01" />-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>

<body class="">
  <form class="text-center" action="/" id="resultForm">
    <h4 class="bg-primary text-white p-3">EXAMCHAMP     :       WBBSE 2020 PPR/PPS Results</h4>
    <div class="">
        <div class="error text-danger font-weight-bold" id="rollErr"></div>
        <div class="error text-danger font-weight-bold" id="applErr"></div>
        <br/>
      <div class="">
        <div class="">
          <label>Roll Number <span class="text-danger">*</span></label>
          <input class="" type="text" placeholder="" name="roll_n" />
        </div>
        <div class="">
          <label>Date of Birth <span class="text-danger">*</span></label>
          <div class="">
            <div class="">
              <select class="" name="day">
                <option value="01" selected>01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
                <option value="09">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
              </select>
              <select class="" name="month">
                <option value="01" selected>Jan (01)</option>
                <option value="02">Feb (02)</option>
                <option value="03">Mar (03)</option>
                <option value="04">Apr (04)</option>
                <option value="05">May (05)</option>
                <option value="06">Jun (06)</option>
                <option value="07">Jul (07)</option>
                <option value="08">Aug (08)</option>
                <option value="09">Sep (09)</option>
                <option value="10">Oct (10)</option>
                <option value="11">Nov (11)</option>
                <option value="12">Dec (12)</option>
              </select>
              <select class="" name="year">
                <option value="70" selected>1970</option>
                <option value="71">1971</option>
                <option value="72">1972</option>
                <option value="73">1973</option>
                <option value="74">1974</option>
                <option value="75">1975</option>
                <option value="76">1976</option>
                <option value="77">1977</option>
                <option value="78">1978</option>
                <option value="79">1979</option>
                <option value="80">1980</option>
                <option value="81">1981</option>
                <option value="82">1982</option>
                <option value="83">1983</option>
                <option value="84">1984</option>
                <option value="85">1985</option>
                <option value="86">1986</option>
                <option value="87">1987</option>
                <option value="88">1988</option>
                <option value="89">1989</option>
                <option value="90">1990</option>
                <option value="91">1991</option>
                <option value="92">1992</option>
                <option value="93">1993</option>
                <option value="94">1994</option>
                <option value="95">1995</option>
                <option value="96">1996</option>
                <option value="97">1997</option>
                <option value="98">1998</option>
                <option value="99">1999</option>
                <option value="00">2000</option>
                <option value="01">2001</option>
                <option value="02">2002</option>
                <option value="03">2003</option>
                <option value="04">2004</option>
                <option value="05">2005</option>
                <option value="06">2006</option>
                <option value="07">2007</option>
                <option value="08">2008</option>
                <option value="09">2009</option>
                <option value="10">2010</option>
                <option value="11">2011</option>
                <option value="12">2012</option>
                <option value="13">2013</option>
                <option value="14">2014</option>
              </select>
            </div>
          </div>
        </div>
        <br/>
        <button class="btn btn-success" type="submit">
          <span class="spinner-border spinner-border-sm mr-2 d-none" id="loadingSpinner" role="status"
            aria-hidden="true"></span>
          Search
        </button>
      </div>
    </div>
  </form>
  <div class="result-wrapper pb-3 d-none" id="resultWrapper">
    <!-- <h1 class="board-title">BOARD OF SECONDARY EDUCATION MADHYA PRADESH, BHOPAL</h1>
    <h2 class="board-subtitle">HIGH SCHOOL CERTIFICATE EXAMINATION (HSC)-10th CLASS RESULT-2020</h2> -->
    <div class="result-table" id="resultTable"></div>
    <button class="btn btn-primary d-block mx-auto" onclick="checkAnotherResult()">
      Check Another Result
    </button>
  </div>
  <script>
    var getUrlParam = (param) => {
      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      return urlParams.get(param);
    };
    var postHeight = function () {
      let bodyHeight = document.body.scrollHeight;
      if (bodyHeight > 200) {
        window.parent.postMessage({
            iframeId: 'boardResultFormWB',
            type: 'resize-iframe',
            height: bodyHeight,
          },
          '*'
        );
      }
    };
    window.onload = function () {
      postHeight();
      const boardName = getUrlParam('board');
      const boardClass = getUrlParam('class');
      // document.getElementById('boardName').innerText = boardName;
      // document.getElementById('boardClass').innerText = boardClass;
    };
  </script>
  <script>
    document.getElementById('resultForm').addEventListener('submit', (e) => {
      e.preventDefault();
      var spinner = document.getElementById('loadingSpinner');
      spinner.classList.remove('d-none');
      spinner.parentElement.classList.add('disabled');
      spinner.parentElement.setAttribute('disabled', 'disabled');
      const formData = new FormData(e.target);
      let data = Array.from(formData.entries()).reduce(
        (memo, pair) => ({
          ...memo,
          [pair[0]]: pair[1],
        }), {}
      );
      data.roll_n = data.roll_n.trim();
      var errors = 0;
      var rollErr = document.getElementById('rollErr');
      var applErr = document.getElementById('applErr');
      rollErr.innerHTML = '';
      applErr.innerHTML = '';
      const roll_n = data.roll_n;
      if (roll_n == '') {
        rollErr.innerText = 'Roll Number Required';
        errors = 1;
      }
      const date = `${data.day}${data.month}${data.year}`;
      if (date == '') {
        applErr.innerText = 'Date of birth Required';
        errors = 1;
      }
      if (errors == 1) {
        spinner.classList.add('d-none');
        spinner.parentElement.classList.remove('disabled');
        spinner.parentElement.removeAttribute('disabled');
        return false;
      } else {
        // url = `https://snno51kbvd.execute-api.ap-south-1.amazonaws.com/Staging/getdata/${roll_n}/${date}`;
        // url = `https://snno51kbvd.execute-api.ap-south-1.amazonaws.com/wbppr2020/wb-ppr-2020/${roll_n}`;
        url = `https://snno51kbvd.execute-api.ap-south-1.amazonaws.com/wbppr2020/wb-ppr-2020/${roll_n}/${date}`;
        
        fetch(url, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          })
          .then(function (response) {
            return response.json();
          })
          .then(function (data_res) {
            spinner.classList.add('d-none');
            spinner.parentElement.classList.remove('disabled');
            spinner.parentElement.removeAttribute('disabled');
            const results = data_res.Items;
            if (results.length == 0) {
              rollErr.innerText = "Your Credentials / Record Not Found";
            } else {
              document.getElementById('resultForm').classList.add('d-none');
              generateResultTable(results, data);
            }
          })
          .catch(function (err) {
            console.log(err);
            spinner.classList.add('d-none');
            spinner.parentElement.classList.remove('disabled');
            spinner.parentElement.removeAttribute('disabled');
            rollErr.innerText = 'Error! Please Try Again';
          });
      }
    });

    function checkAnotherResult() {
      const pagetype = getUrlParam("pagetype");
      if (pagetype == "amp") {
        document.getElementById('resultForm').reset();
        document.getElementById('resultForm').classList.remove('d-none');
        document.getElementById('resultWrapper').classList.add('d-none');
      } else {
        window.parent.postMessage({
            type: 'reload-page',
          },
          '*'
        );
        // postHeight();
      }
    }

    function generateResultTable(res, data) {
      const result = res[0];
      let personalHtml = '';
      let subjectsHtml =
        `<tr><th colspan="2" style="font-size:14px; font-weight:bold;">Subject</th><th width="20%" style="text-align:center;font-size:14px; font-weight:bold;">Marks</th><th width="20%" style="text-align:center;font-size:14px; font-weight:bold;">Grades</th></tr>`;
      const boardName = 'WB Board';
      const boardClass = '10th';
      const subjects = ["First_Language", "Second_Language", "Mathematics", "Physical_Science", "Life_Science",
        "History", "Geography", "Opt_Elec"
      ];

      personalHtml = `
        <tr><td width="40%">STUDENT'S NAME</td><td colspan="5">${result.Name.S}</td></tr>
        <tr><td width="40%">ROLL NO</td><td colspan="5">${result.ROll_No.S}</td></tr>
        <tr><td width="40%">DATE OF BIRTH</td><td colspan="5">${data.day}/${data.month}/${data.year}</td></tr>`;

      subjects.forEach(subject => {
        // if (result[`${subject}_Marks`] && result[`${subject}_Marks`] > 0) {
        const marks = result[`${subject}_Marks`].S.trim();
        const grade = result[`${subject}_Grade`].S.trim();
        subjectsHtml += `<tr>
            <td colspan="2" width="50%">${subject.split("_").join(" ")}</td>
            <td style="text-align:center;">${marks}</td>
            <td style="text-align:center;">${grade}</td>
          </tr>`;
        // }
      });

      remarksHtml = `
      <tr><td colspan="2" style="text-align:right">Total Marks</td><td colspan="3" style="font-size:16px;font-weight:bold;">${result.Aggregate.S}</td></tr>
      <tr><td colspan="2" style="text-align:right">Overall Grade</td><td colspan="3" style="font-size:16px;font-weight:bold;">${result.Overall_Grade.S}</td></tr>
      <tr><td colspan="2" style="text-align:right">Remarks</td><td colspan="3" style="font-size:16px;font-weight:bold;">${result.Remarks.S}</td></tr>
      `;

      const resultTableHtml =
        `<table class="table" width="100%" border="1" id="marksheet"><thead><tr><th colspan="6"><span class="result-title" style="font-size:16px;">${boardName} ${boardClass} Result</span><button class="btn btn-secondary" id="printResult" onclick="window.print();">Print</button></th></tr>${personalHtml}</thead><tbody>${subjectsHtml}${remarksHtml}<tfoot><tr><td colspan="5"><small class="disclaimer"><strong>Disclaimer: </strong>“Provisional Results of Madhyamik Pariksha, 2020 have been published by WBBSE with a view to providing immediate information to the examinees. These cannot be treated as original mark sheets. West Bengal Board of Secondary Education is not responsible for any inadvertent error that might have crept in the results of Madhyamik Pariksha, 2020 being published through this Website. This Result is Only For Your Result Checking Purpose,Not For Official Use.”</small></td></tr></tfoot></table>`;
      document.getElementById('resultWrapper').classList.remove('d-none');
      document.getElementById('resultTable').innerHTML = resultTableHtml;
      postHeight();
    }
  </script>
  <script language="JavaScript">
    /**
      * Disable right-click of mouse, F12 key, and save key combinations on page
      * By Arthur Gareginyan (https://www.arthurgareginyan.com)
      * For full source code, visit https://mycyberuniverse.com
      */
    window.onload = function() {
      document.addEventListener("contextmenu", function(e){
        e.preventDefault();
      }, false);
      document.addEventListener("keydown", function(e) {
      //document.onkeydown = function(e) {
        // "I" key
        if (e.ctrlKey && e.shiftKey && e.keyCode == 73) {
          disabledEvent(e);
        }
        // "J" key
        if (e.ctrlKey && e.shiftKey && e.keyCode == 74) {
          disabledEvent(e);
        }
        // "S" key + macOS
        if (e.keyCode == 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) {
          disabledEvent(e);
        }
        // "U" key
        if (e.ctrlKey && e.keyCode == 85) {
          disabledEvent(e);
        }
        // "F12" key
        if (event.keyCode == 123) {
          disabledEvent(e);
        }
      }, false);
      function disabledEvent(e){
        if (e.stopPropagation){
          e.stopPropagation();
        } else if (window.event){
          window.event.cancelBubble = true;
        }
        e.preventDefault();
        return false;
      }
    };
  </script>
</body>

</html>